CREATE TABLE CATEGORIE (
	id char(5) PRIMARY KEY,
	nome varchar(30)
)TYPE=INNODB;

CREATE TABLE C_U (
	idU char(30),
	idC char(5), 
	PRIMARY KEY(idU,idC),
	FOREIGN KEY (idU) REFERENCES UTENTE(nickname) ON UPDATE CASCADE ON DELETE SET NULL,
	FOREIGN KEY (idC) REFERENCES CATEGORIE(id) ON UPDATE CASCADE ON DELETE SET NULL
)TYPE=INNODB;

CREATE TABLE UTENTI (
	nickname char(30) PRIMARY KEY,
	nome varchar(50) NOT NULL,
	cognome varchar(50) NOT NULL,
	email varchar(50) NOT NULL
)TYPE=INNODB;

CREATE TABLE COMMENTI (
	id char(8) PRIMARY KEY,
	commento varchar(100) NOT NULL,
	voto char(1) NOT NULL,
	idU char(30) REFERENCES UTENTI(nickname) ON UPDATE CASCADE ON DELETE SET NULL,
	evento char(30) REFERENCES EVENTI(id) ON UPDATE CASCADE ON DELETE SET NULL
)TYPE=INNODB;

CREATE TABLE ARTISTI (
	id char(5) PRIMARY KEY,
	nomeArte varchar(30) NOT NULL
)TYPE=INNODB;

CREATE TABLE E_A (
	idA char(5),
	idE char(10),
	PRIMARY KEY(idA,idE),
	FOREIGN KEY (idA) REFERENCES ARTISTI(id) ON UPDATE CASCADE ON DELETE SET NULL,
	FOREIGN KEY (idE) REFERENCES EVENTI(id) ON UPDATE CASCADE ON DELETE SET NULL
)TYPE=INNODB;

CREATE TABLE EVENTI (
	id char(10) PRIMARY KEY,
	titolo varchar(30) NOT NULL,
	luogo varchar(50) NOT NULL,
	data date,
	idU char(30) REFERENCES UTENTI(nickname) ON UPDATE CASCADE ON DELETE SET NULL,
	categoria char(5) REFERENCES CATEGORIE(id) ON UPDATE CASCADE ON DELETE SET NULL
)TYPE=INNODB;
